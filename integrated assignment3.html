<!DOCTYPE html>
  <html>
    <head>
      <title>integrated assignment3</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
.markdown-preview.markdown-preview pre.output {
  background-color: #d7d7d9;
}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */
.md-sidebar-toc {
  background-color: #b4e5f5 !important;
  font-size: 1.2em !important;
  list-style: none;
}
.md-sidebar-toc .md-toc-link-wrapper {
  list-style: none !important;
}
.md-sidebar-toc .md-toc-link-wrapper ol {
  margin: 0px ;
}
.md-sidebar-toc details {
  margin-left: 18px !important;
}
.markdown-preview.markdown-preview img.center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}
.markdown-preview.markdown-preview code {
  padding: 0.2em 0.4em;
  margin: 0;
  font-size: 85%;
  border-radius: 3px;
}
.markdown-preview.markdown-preview .files {
  color: #0b6629;
  font-weight: bold;
}
.markdown-preview.markdown-preview .md-toc details {
  padding-left: 20px;
  margin-left: 18px !important;
}
.markdown-preview.markdown-preview .md-toc ol {
  margin: 0px ;
}
.markdown-preview.markdown-preview .md-toc .md-toc-link-wrapper {
  list-style: none !important;
}
.markdown-preview.markdown-preview .md-toc .md-toc-link-wrapper ol {
  margin: 0px ;
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><html><head><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body></body></html>
    </head>
    <body for="html-export" >
      <div class="crossnote markdown-preview  "  >
      <html><head></head><body><div>
<h2>Integrated Assignment 3: Create a RESTful Web Service</h2>
<p>In this assignment, we will create the <strong>back-end</strong> of the e-commerce application we have been developing in previous Integrated Assignments. We will use <strong>Node.js</strong> to build our <strong>REST API</strong> that allows to create, read, update, and delete products. We will store the information in JSON files and implement basic authentication to simplify the assignment. To validate our web service, we will use HTTP requests to perform CRUD operations using <strong>RestClient</strong>.</p>

<div class="md-toc">
<div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#assignment-description" class="md-toc-link">
            <p>Assignment description</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#before-starting" class="md-toc-link">
            <p>Before Starting</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#get-apiproducts--admin-optional" class="md-toc-link">
            <p>GET /api/products  (admin optional)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#get-apiproductsid--admin-optional" class="md-toc-link">
            <p>GET /api/products/:id  (admin optional)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#post-apiproducts--only-admin" class="md-toc-link">
            <p>POST /api/products  (only admin)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#put-apiproductsid-only-admin" class="md-toc-link">
            <p>PUT /api/products/:id (only admin)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#delete-apiproductsid-only-admin" class="md-toc-link">
            <p>DELETE /api/products/:id (only admin)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#post-apicart--user-required" class="md-toc-link">
            <p>POST /api/cart  (user required)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#get-apicart--user-required" class="md-toc-link">
            <p>GET /api/cart  (user required)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#authentication-middlewares" class="md-toc-link">
            <p>Authentication Middlewares</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#evaluation" class="md-toc-link">
            <p>Evaluation</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a href="#testing-the-api" class="md-toc-link">
            <p>Testing the API</p>

          </a></div>
</div>
<h2 id="assignment-description">Assignment description </h2>
<table>
  <thead>
    <tr>
      <th>Resource</th>
      <th>Endpoint</th>
      <th>Headers</th>
      <th>Body</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr style="background-color:#f0f0f0">
      <td rowspan="5">Products</td>
      <td>GET /api/products</td>
      <td>x-token (optional)</td>
      <td>N/A</td>
      <td>
        Retrieve a list of products with optional filtering. Admins can see stock attribute.
        <ul>
          <li>Query Params:
            <ul>
              <li><code>name</code>: Filter by product name.</li>
              <li><code>category</code>: Filter by product category.</li>
              <li><code>min</code>: Minimum price filter.</li>
              <li><code>max</code>: Maximum price filter.</li>
              <li>all other properties</li>
            </ul>
          </li>
          <li>Validaciones:
            <ul>
              <li>Return status <code>200</code> on success.</li>
              <li>For admins, include stock attribute.</li>
            </ul>
          </li>
        </ul>
      </td>
    </tr>
    <tr style="background-color:#f0f0f0">
      <td>GET /api/products/:id</td>
      <td>x-token (optional)</td>
      <td>N/A</td>
      <td>
        Retrieve a specific product by ID (uuid). Admins can see stock attribute.
        <ul>
          <li>Validaciones:
            <ul>
              <li>If product is not found, return status <code>404</code>.</li>
              <li>Return status <code>200</code> on success</li>
            </ul>
          </li>
        </ul>
      </td>
    </tr>
    <tr style="background-color:#f0f0f0">
      <td>POST /api/products</td>
    <td>
Content-Type: application/json,
x-token: adminToken
      </td>
      <td>
{
    "imageUrl": "string",
    "name": "string",
    "description": "string",
    "unit": "string",
    "category": "string",
    "pricePerUnit": 0,
    "stock": 0
}
      </td>
      <td>
        Create a new product (admin only).
        <ul>
          <li>Validaciones:
            <ul>
              <li>Return status <code>201</code> on success, <code>403</code> if username is not defined (in x-user).</li>
              <li>Check for required attributes in the body and return status <code>400</code> if missing.</li>
            </ul>
          </li>
        </ul>
      </td>
    </tr>
    <tr style="background-color:#f0f0f0">
      <td>PUT /api/products/:id</td>
      <td>
       Content-Type: application/json,
       x-token: adminToken
        </td>
      <td>
{
    "imageUrl": "string",
    "name": "string",
    "description": "string",
    "unit": "string",
    "category": "string",
    "pricePerUnit": 0,
    "stock": 0
}
      </td>
      <td>
        Update attributes of a product (admin only).
        <ul>
          <li>Validaciones:
            <ul>
              <li>Return status <code>200</code> on success, <code>403</code> if user is not authenticated.</li>
              <li>Return status <code>400</code> if body is missing attributes or if IDs are invalid.</li>
              <li>Return status <code>404</code> if the product ID does not exist.</li>
            </ul>
          </li>
        </ul>
      </td>
    </tr>
    <tr style="background-color:#f0f0f0">
      <td>DELETE /api/products/:id</td>
      <td>x-token (only admin)</td>
      <td>N/A</td>
      <td>
        Delete a product by ID (admin only).
        <ul>
          <li>Validaciones:
            <ul>
              <li>Return status <code>200</code> on success, <code>403</code> if user is not authenticated.</li>
              <li>Return status <code>404</code> if the product ID does not exist.</li>
            </ul>
          </li>
        </ul>
      </td>
    </tr>
    <tr style="background-color:#f9f9f9">
      <td rowspan="2">Cart</td>
      <td>GET /api/cart</td>
      <td>x-user: userName</td>
      <td>N/A</td>
      <td>
        Retrieve the shopping cart for the specified user, including the total and product details.
        <ul>
          <li>Validaciones:
            <ul>
              <li>Return status <code>200</code> on success, <code>403</code> if user is not authenticated.</li>
            </ul>
          </li>
        </ul>
      </td>
    </tr>
    <tr style="background-color:#f9f9f9">
      <td>POST /api/cart</td>
      <td>
Content-Type: application/json, 
x-user: userName
      </td>
      <td>
[
    {
        "uuid": "abcd",
        "amount": 3
    },
    {
        "uuid": "edsfe",
        "amount": 2
    }
]
      </td>
      <td>
        Add products to the user's shopping cart.
        <ul>
          <li>Validaciones:
            <ul>
              <li>Return status <code>202</code> on success, <code>403</code> if username is not defined (in x-user).</li>
              <li>Return status <code>400</code> if body is not an array or if IDs are invalid.</li>
              <li>Check if amount is greater than 0 and if stock is sufficient.</li>
            </ul>
          </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="before-starting">Before Starting </h2>
<p>The project structure should look like this:</p>
<pre data-role="codeBlock" data-info="plaintext" class="language-plaintext plaintext"><code>ProductAPI
│
├── data
│   ├── products.json
│   └── cart.json
│
├── middlewares
│   └── auth.js
│
├── routes
│   ├── product-route.js
│   └── cart-route.js
|
├── package.json
│
└── server.js
</code></pre><p>Create a folder named <code>ProductAPI</code>. In the console, run <code>npm init --yes</code> to create the <code>package.json</code>. In the terminal, inside the project directory,  <em>Install express as a dependency</em>  (<code>npm install express</code>). Create a file named <code>products.json</code> and <code>cart.json</code> to store product and cart information, initially the cart can be an empty array <code>[]</code>, but the products file should have at least four products. The products file should be an array of objects with the following structure:</p>
<pre data-role="codeBlock" data-info="json" class="language-json json"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token string">"abcd"</span><span class="token punctuation">,</span>
        <span class="token property">"imageUrl"</span><span class="token operator">:</span> <span class="token string">"image url"</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"product1"</span><span class="token punctuation">,</span>
        <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"description1"</span><span class="token punctuation">,</span>
        <span class="token property">"unit"</span><span class="token operator">:</span> <span class="token string">"unit1"</span><span class="token punctuation">,</span>
        <span class="token property">"category"</span><span class="token operator">:</span> <span class="token string">"category1"</span><span class="token punctuation">,</span>
        <span class="token property">"pricePerUnit"</span><span class="token operator">:</span> <span class="token number">12.34</span><span class="token punctuation">,</span>
        <span class="token property">"stock"</span><span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><p>Create a file <code>server.js</code> and import <code>express</code>. In another file like <code>product-route.js</code>, manage the product endpoints, and <code>cart-route.js</code> for the cart endpoints. Create a folder named <code>middlewares</code> and inside it, create a file named <code>auth.js</code> to manage the authentication middlewares.</p>
<p>Globally load the middleware to parse JSON (<code>express.json()</code>).</p>
<p>Create a root route (<code>/</code>) that only returns "Integrated Assignment 3. e-commerce app".</p>
<p>Start the service on <code>port 3101</code>.</p>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked=""> <em>Test that it works!</em></li>
</ul>
<p>In <code>product-route.js</code> do not forget to export the router (<code>module.exports = router;</code>) and import it in <code>server.js</code> to use it.</p>
<h2 id="get-apiproducts--admin-optional">GET /api/products  (admin optional) </h2>
<p>First, we will return the list of products (without the stock attribute, which should only be visible to the admin), using the files created in the Integrated Assignment 2 (optional, but not necessary). We will also allow filtering the list.</p>
<ol>
<li>Return all products: return the values already loaded in our products array (<code>products</code>).
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked=""> Test it (You should see an the array of products)</li>
</ul>
</li>
<li>Return filtered list of products: check if the request contains search parameters, in which case filter the list and return only the desired values. Filtering can be done by any attribute (except stock), individually or by a combination of attributes. Substring matching is desired. Additionally, filtering by a price range (min, max) is possible. If only min is specified, return those with <code>pricePerUnit &gt;=min;</code> if only max is specified, return those with <code>pricePerUnit &lt;=max;</code>  if both <code>min&lt;=pricePerUnit&lt;=max</code>.
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked=""> Test it with different combinations of query parameters (name, category, min, max, etc.)</li>
</ul>
</li>
<li>If the user is an admin, display the stock attribute. (Working with headers and setting admin status should be done using middlewares). Therefore, this step can be done after implementing the middlewares.
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked=""> Test it with and without the <code>x-token</code> header, admin and no admin user.</li>
</ul>
</li>
</ol>
<h2 id="get-apiproductsid--admin-optional">GET /api/products/:id  (admin optional) </h2>
<p>Allow searching for products directly by their ID.</p>
<ol>
<li>If the ID is invalid, return an error status (<code>404</code>) with a message explaining that the product was not found.</li>
<li>If everything is correct, return a success status (<code>200</code>) and the corresponding product. If the user is an admin, display the stock attribute.
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked=""> Test it with a valid and invalid ID, admin and no admin user.</li>
</ul>
</li>
</ol>
<h2 id="post-apiproducts--only-admin">POST /api/products  (only admin) </h2>
<p>For the administrator part, we will first work on registering a product. Before continuing, do not forget to implement the authentication middleware. To register, we must:</p>
<ol>
<li>Validate that the body contains all the attributes we are interested in; otherwise, return an error status (<code>400</code>). Indicate the list of attributes that are missing or are not valid. You can create a function to validate the attributes, this will be used in the PUT endpoint as well.</li>
<li>Validate that there are no other product with the same name; otherwise, return an error status (<code>400</code>) with a message indicating that the product already exists.</li>
<li>Assign a unique identifier (product ID) automatically using <code>nanoid</code> version 3.0.0.</li>
<li>Save the new product in the array and return status <code>201</code> with a message indicating the name of the created product.</li>
<li>Do not forget to update the <code>products.json</code> file.</li>
</ol>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked=""> Test it.</li>
</ul>
<h2 id="put-apiproductsid-only-admin">PUT /api/products/:id (only admin) </h2>
<p>We will allow the administrator to modify the attributes of a product. Do not forget to implement the authentication middleware.</p>
<ol>
<li>Verify that the ID corresponds to an existing product; otherwise, return an error status (<code>404</code>).</li>
<li>Validate that the body contains the attributes we are interested in, similar to POST (return a list of missing or invalid attributes).</li>
<li>Validate that there are no other products (different of the current one) with the same name; otherwise, return an error status (<code>400</code>) with a message indicating that the product already exists.</li>
<li>Save the changes to the product in the array and return status <code>200</code>, with a message indicating the name of the updated product.</li>
<li>Do not forget to update the <code>products.json</code> file.</li>
</ol>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked=""> Test it.</li>
</ul>
<h2 id="delete-apiproductsid-only-admin">DELETE /api/products/:id (only admin) </h2>
<p>We will allow the administrator to delete a specific product. Do not forget to implement the authentication middleware.</p>
<ol>
<li>Verify that the ID corresponds to an existing product; otherwise, return an error status (<code>404</code>).</li>
<li>Save the changes in the array and return status <code>200</code>, with a message indicating the name of the deleted product.</li>
<li>Do not forget to update the <code>products.json</code> file.</li>
</ol>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked=""> Test it.</li>
</ul>
<h2 id="post-apicart--user-required">POST /api/cart  (user required) </h2>
<p>To add the corresponding products to our shopping cart, an array of proxies (uuid and amount) must be sent. Additionally, each user should have their own shopping cart. Since we have not implemented the login part, we will simulate it with the <code>x-user</code> header (validate the header with middleware as described in the following section).</p>
<p>The body has the following structure:</p>
<pre data-role="codeBlock" data-info="http" class="language-http http"><code>POST /api/cart
<span class="token header"><span class="token header-name keyword">content-type</span><span class="token punctuation">:</span> <span class="token header-value">application/json</span></span>
<span class="token header"><span class="token header-name keyword">x-user</span><span class="token punctuation">:</span> <span class="token header-value">userName</span></span>
<span class="token application-json">
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string-property property">"uuid"</span><span class="token operator">:</span> <span class="token string">"abcd"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"amount"</span><span class="token operator">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token string-property property">"uuid"</span><span class="token operator">:</span> <span class="token string">"edsfe"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"amount"</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</span></code></pre><p>The information can be stored in the cart.json file and will have a structure like the following (but initially empty):</p>
<pre data-role="codeBlock" data-info="json" class="language-json json"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token property">"user"</span><span class="token operator">:</span> <span class="token string">"userName"</span><span class="token punctuation">,</span>
        <span class="token property">"cart"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token string">"abcd"</span><span class="token punctuation">,</span>
                <span class="token property">"amount"</span><span class="token operator">:</span> <span class="token number">3</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token string">"edsfe"</span><span class="token punctuation">,</span>
                <span class="token property">"amount"</span><span class="token operator">:</span> <span class="token number">2</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token property">"user"</span><span class="token operator">:</span> <span class="token string">"userName2"</span><span class="token punctuation">,</span>
        <span class="token property">"cart"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token string">"eDsfsdf"</span><span class="token punctuation">,</span>
                <span class="token property">"amount"</span><span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><ol>
<li>Validate that the received body is an array; otherwise, return an error status (<code>400</code>).</li>
<li>Iterate through the received array, validating that all IDs exist; otherwise, return (<code>404</code>) with a message explaining which product was not found.</li>
<li>Test that the amount is greater than 0; otherwise, return an error status (<code>400</code>) with a message.</li>
<li>Check that the stock is sufficient; otherwise, return an error status (<code>400</code>) with a message.</li>
<li>After verifying that all products were found, return the temporary list with an accepted status (<code>202</code>). Don't forget to save the cart in the cart.json file. If a cart already existed for the user, replace it.</li>
</ol>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked=""> Test it.</li>
</ul>
<h2 id="get-apicart--user-required">GET /api/cart  (user required) </h2>
<p>Display the shopping cart object including a "product" property with all the details (excluding the stock attribute) and the total for the user specified in <code>x-user</code> header (test this header with middleware).</p>
<ol>
<li>Search in the cart for the specified user.</li>
<li>For each ID, search in the list of products and add the product details (except stock).</li>
<li>Calculate the total price.</li>
<li>If a product no longer exists or stock is 0, skip it and do not add it to the response.</li>
<li>If the stock is less than the amount requested, return the available stock.</li>
<li>Return something like JSON</li>
</ol>
<ul>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" checked=""> Test it.</li>
</ul>
<p>Expected response:</p>
<pre data-role="codeBlock" data-info="json" class="language-json json"><code>    <span class="token punctuation">{</span>
        <span class="token property">"user"</span><span class="token operator">:</span> <span class="token string">"usuario"</span><span class="token punctuation">,</span>
        <span class="token property">"cart"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token string">"abcd"</span><span class="token punctuation">,</span>
                <span class="token property">"amount"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                <span class="token property">"product"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token string">"abcd"</span><span class="token punctuation">,</span>
                    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"product1"</span><span class="token punctuation">,</span>
                    <span class="token property">"category"</span><span class="token operator">:</span> <span class="token string">"category1"</span><span class="token punctuation">,</span>
                    <span class="token property">"pricePerUnit"</span><span class="token operator">:</span> <span class="token number">12.34</span><span class="token punctuation">,</span>
                    ...
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token string">"edsfe"</span><span class="token punctuation">,</span>
                <span class="token property">"amount"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token property">"product"</span><span class="token operator">:</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">"total"</span><span class="token operator">:</span> <span class="token number">45.92</span>
    <span class="token punctuation">}</span>
</code></pre><h2 id="authentication-middlewares">Authentication Middlewares </h2>
<ol>
<li>Create middlewares that verifies if the user is admin or not using the <code>x-token</code> header with the value <em>"admin2024"</em>. In the case that an admin is required, return an error <code>403</code> with a message:  <em>"Unauthorized access"</em>. If the <code>x-token</code> exists, add the property <code>isAdmin = true</code> in the request so it can be used in the endpoint if required  (in get of /api/products and /api/products/:id).</li>
<li>Create a middleware function that verifies the existence of the <code>x-user</code> header. If it does not exist, return <code>403</code> with a message. If it does exist, set the <code>userName</code> attribute in the request with the value of the header so it can be used in the endpoint as <code>req.userName</code>.</li>
</ol>
<h2 id="evaluation">Evaluation </h2>
<table>
<thead>
<tr>
<th>Requirement (validations, all status codes, it works).</th>
<th>Value</th>
<th>Done (Yes/No)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1. GET /api/products  <br> - It filters by multiple query parameters (name, price, category, ...)</td>
<td>10</td>
<td></td>
</tr>
<tr>
<td>2. GET /api/products  <br> - It shows the stock only for admin user</td>
<td>10</td>
<td></td>
</tr>
<tr>
<td>3. GET /api/products/:id <br> -  It shows the stock only for admin user</td>
<td>10</td>
<td></td>
</tr>
<tr>
<td>4. POST /api/products <br> - it validates the body, <br> - return list of invalid and missing attributes. <br> - avoids repeated products</td>
<td>15</td>
<td></td>
</tr>
<tr>
<td>5. PUT /api/products/:id  <br> -  validates data, <br> - avoids repeated products.</td>
<td>10</td>
<td></td>
</tr>
<tr>
<td>6. DELETE /api/products:id  <br> - only admins can delete</td>
<td>10</td>
<td></td>
</tr>
<tr>
<td>7. POST /api/cart <br> - creates a shopping cart for a particular user, <br> - validates the amount and stock</td>
<td>20</td>
<td></td>
</tr>
<tr>
<td>8. GET /api/cart  <br> - gets all cart with the product details <br> - includes the total</td>
<td>15</td>
<td></td>
</tr>
<tr>
<td>9. User and admin middlewares  <br>- x-auth and x-user validated using middlewares</td>
<td>10</td>
<td></td>
</tr>
</tbody>
</table>
<p>Maximum score: 100 points.</p>
<p>Deliverables:</p>
<ul>
<li>Create a REST Client file (<code>.http</code>) validating the functionality of each Endpoint.</li>
<li>Create a report file with your evaluation according to the rubric.  In the report, add conclusions, areas for improvement, challenging topics, etc.</li>
<li>Delete node_modules and zip the project.</li>
<li>Include a short video of 2 or 3 minutes showing that your API works. Add the video link to the report, and add permissions to the video so anyone with the link can view it.</li>
<li>Upload the zip file and the report to the corresponding platform ( two files)</li>
</ul>
<h2 id="testing-the-api">Testing the API </h2>
<p>Provide several examples per endpoint and put a note in each test. Example of how to test:</p>
<pre data-role="codeBlock" data-info="http" class="language-http http"><code>@host = `http://localhost:3101`


### ----------GET PRODUCTS------------


### ALL PRODUCTS FOR NON-ADMIN

GET {{host}}/api/products

### RETURN ALL PRODUCT ATTRIBUTES (ALSO STOCK)

GET {{host}}/api/products
<span class="token header"><span class="token header-name keyword">x-token</span><span class="token punctuation">:</span> <span class="token header-value">admin2024</span></span>

### FILTER BY NAME AND CATEGORY FOR NON-ADMIN

GET {{host}}/api/products?name=a&amp;category=b

### FILTER BY PRICE RANGE FOR NON-ADMIN

GET {{host}}/api/products?min=10&amp;max=70


### ----------GET PRODUCTS BY ID------------

### GET PRODUCT BY ID (VALID ID AND NON-ADMIN)

### GET PRODUCT BY ID (VALID ID) (ADMIN)

### GET PRODUCT BY ID (INVALID ID)


### ----------POST PRODUCTS------------

### ADD A PRODUCT OK (ADMIN)

POST {{host}}/api/products
<span class="token header"><span class="token header-name keyword">Content-Type</span><span class="token punctuation">:</span> <span class="token header-value">application/json</span></span>
<span class="token header"><span class="token header-name keyword">x-token</span><span class="token punctuation">:</span> <span class="token header-value">admin2024</span></span>
<span class="token application-json">
<span class="token punctuation">{</span>
    <span class="token string-property property">"imageUrl"</span><span class="token operator">:</span> <span class="token string">"image url"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"product1"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"description"</span><span class="token operator">:</span> <span class="token string">"description1"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"unit"</span><span class="token operator">:</span> <span class="token string">"unit1"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"category"</span><span class="token operator">:</span> <span class="token string">"category1"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"pricePerUnit"</span><span class="token operator">:</span> <span class="token number">12.34</span><span class="token punctuation">,</span>
    <span class="token string-property property">"stock"</span><span class="token operator">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span>

### <span class="token constant">ADD</span> <span class="token constant">A</span> <span class="token constant">PRODUCT</span> <span class="token punctuation">(</span><span class="token constant">MISSING</span> <span class="token constant">PROPERTIES</span><span class="token punctuation">)</span>

<span class="token constant">POST</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>host<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span>api<span class="token operator">/</span>products
<span class="token maybe-class-name">Content</span><span class="token operator">-</span><span class="token maybe-class-name">Type</span><span class="token operator">:</span> application<span class="token operator">/</span>json
x<span class="token operator">-</span>token<span class="token operator">:</span> admin2024

<span class="token punctuation">{</span>
    <span class="token string-property property">"imageUrl"</span><span class="token operator">:</span> <span class="token string">"image url"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"product1"</span>
<span class="token punctuation">}</span>


### <span class="token constant">ADD</span> <span class="token constant">A</span> <span class="token constant">PRODUCT</span> <span class="token punctuation">(</span><span class="token constant">ADMIN</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">REPEATED</span> <span class="token constant">NAME</span><span class="token punctuation">)</span>

### <span class="token constant">ADD</span> <span class="token constant">A</span> <span class="token constant">PRODUCT</span> <span class="token punctuation">(</span><span class="token constant">MISSING</span> <span class="token constant">X</span><span class="token operator">-</span><span class="token constant">TOKEN</span><span class="token punctuation">)</span>

### <span class="token constant">ADD</span> <span class="token constant">A</span> <span class="token constant">PRODUCT</span> <span class="token punctuation">(</span><span class="token constant">X</span><span class="token operator">-</span><span class="token constant">TOKEN</span> <span class="token constant">NOT</span> <span class="token constant">ADMIN</span><span class="token punctuation">)</span>

### <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">PUT</span> <span class="token constant">PRODUCTS</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

### <span class="token constant">UPDATE</span> <span class="token constant">PRODUCT</span> <span class="token constant">OK</span> <span class="token punctuation">(</span><span class="token constant">ADMIN</span><span class="token punctuation">)</span>

### <span class="token constant">UPDATE</span> <span class="token constant">PRODUCT</span> <span class="token punctuation">(</span><span class="token constant">MISSING</span> <span class="token constant">PROPERTIES</span><span class="token punctuation">)</span>

### <span class="token constant">UPDATE</span> <span class="token constant">PRODUCT</span> <span class="token punctuation">(</span><span class="token constant">ADMIN</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">REPEATED</span> <span class="token constant">NAME</span><span class="token punctuation">)</span>

### <span class="token constant">UPDATE</span> <span class="token constant">PRODUCT</span> <span class="token punctuation">(</span><span class="token constant">MISSING</span> <span class="token constant">X</span><span class="token operator">-</span><span class="token constant">TOKEN</span><span class="token punctuation">)</span>

### <span class="token constant">UPDATE</span> <span class="token constant">PRODUCT</span> <span class="token punctuation">(</span><span class="token constant">X</span><span class="token operator">-</span><span class="token constant">TOKEN</span> <span class="token constant">NOT</span> <span class="token constant">ADMIN</span><span class="token punctuation">)</span>

### <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">DELETE</span> <span class="token constant">PRODUCTS</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

### <span class="token constant">DELETE</span> <span class="token constant">PRODUCT</span> <span class="token constant">OK</span> <span class="token punctuation">(</span><span class="token constant">ADMIN</span><span class="token punctuation">)</span>

### <span class="token constant">DELETE</span> <span class="token constant">PRODUCT</span> <span class="token punctuation">(</span><span class="token constant">MISSING</span> <span class="token constant">X</span><span class="token operator">-</span><span class="token constant">TOKEN</span><span class="token punctuation">)</span>

### <span class="token constant">DELETE</span> <span class="token constant">PRODUCT</span> <span class="token punctuation">(</span><span class="token constant">X</span><span class="token operator">-</span><span class="token constant">TOKEN</span> <span class="token constant">NOT</span> <span class="token constant">ADMIN</span><span class="token punctuation">)</span>

### <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">POST</span> <span class="token constant">CART</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

### <span class="token constant">ADD</span> <span class="token constant">TO</span> <span class="token constant">CART</span> <span class="token punctuation">(</span><span class="token constant">VALID</span><span class="token punctuation">)</span>

### <span class="token constant">ADD</span> <span class="token constant">TO</span> <span class="token constant">CART</span> <span class="token punctuation">(</span><span class="token constant">MISSING</span> <span class="token constant">X</span><span class="token operator">-</span><span class="token constant">USER</span><span class="token punctuation">)</span>

### <span class="token constant">ADD</span> <span class="token constant">TO</span> <span class="token constant">CART</span> <span class="token punctuation">(</span><span class="token constant">EXISTENT</span> <span class="token constant">USER</span><span class="token punctuation">)</span>

### <span class="token constant">ADD</span> <span class="token constant">TO</span> <span class="token constant">CART</span> <span class="token punctuation">(</span><span class="token constant">INVALID</span> <span class="token constant">AMOUNT</span><span class="token punctuation">)</span>

### <span class="token constant">ADD</span> <span class="token constant">TO</span> <span class="token constant">CART</span> <span class="token punctuation">(</span><span class="token constant">INSUFFICIENT</span> <span class="token constant">STOCK</span><span class="token punctuation">)</span>
 
### <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token constant">GET</span> <span class="token constant">CART</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

### <span class="token constant">GET</span> <span class="token constant">CART</span> <span class="token punctuation">(</span><span class="token constant">VALID</span><span class="token punctuation">)</span>

### <span class="token constant">GET</span> <span class="token constant">CART</span> <span class="token constant">WITH</span> <span class="token constant">INSUFFICIENT</span> <span class="token constant">STOCK</span>
    ### <span class="token constant">MODIFY</span> <span class="token constant">STOCK</span> <span class="token constant">OF</span> <span class="token constant">PRODUCT</span>

    ### <span class="token constant">GET</span> <span class="token constant">CART</span> 

### <span class="token constant">GET</span> <span class="token constant">CART</span> <span class="token constant">WITH</span> <span class="token number">0</span> <span class="token constant">STOCK</span>
    ### <span class="token constant">MODIFY</span> <span class="token constant">STOCK</span> <span class="token constant">OF</span> <span class="token constant">PRODUCT</span>

    ### <span class="token constant">GET</span> <span class="token constant">CART</span> 

### <span class="token constant">GET</span> <span class="token constant">CART</span> <span class="token punctuation">(</span><span class="token constant">MISSING</span> <span class="token constant">X</span><span class="token operator">-</span><span class="token constant">USER</span><span class="token punctuation">)</span>
</span></code></pre></div></body></html>
      </div>
      <div class="md-sidebar-toc">
<div class="md-toc">
<div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#assignment-description"
            class="md-toc-link"
          >
            <p>Assignment description</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#before-starting"
            class="md-toc-link"
          >
            <p>Before Starting</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#get-apiproducts--admin-optional"
            class="md-toc-link"
          >
            <p>GET /api/products  (admin optional)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#get-apiproductsid--admin-optional"
            class="md-toc-link"
          >
            <p>GET /api/products/:id  (admin optional)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#post-apiproducts--only-admin"
            class="md-toc-link"
          >
            <p>POST /api/products  (only admin)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#put-apiproductsid-only-admin"
            class="md-toc-link"
          >
            <p>PUT /api/products/:id (only admin)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#delete-apiproductsid-only-admin"
            class="md-toc-link"
          >
            <p>DELETE /api/products/:id (only admin)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#post-apicart--user-required"
            class="md-toc-link"
          >
            <p>POST /api/cart  (user required)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#get-apicart--user-required"
            class="md-toc-link"
          >
            <p>GET /api/cart  (user required)</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#authentication-middlewares"
            class="md-toc-link"
          >
            <p>Authentication Middlewares</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#evaluation"
            class="md-toc-link"
          >
            <p>Evaluation</p>

          </a></div><div class="md-toc-link-wrapper" style="padding:0;;display:list-item;list-style:square;margin-left:18px">
          <a
            href="#testing-the-api"
            class="md-toc-link"
          >
            <p>Testing the API</p>

          </a></div>
</div>
</div>
      <a id="sidebar-toc-btn">≡</a>
    </body>
    
    
    
    
    
<script>
document.body.setAttribute('html-show-sidebar-toc', true)
var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
sidebarTOCBtn.addEventListener('click', function(event) {
  event.stopPropagation()
  if (document.body.hasAttribute('html-show-sidebar-toc')) {
    document.body.removeAttribute('html-show-sidebar-toc')
  } else {
    document.body.setAttribute('html-show-sidebar-toc', true)
  }
})
</script>
      
  </html>